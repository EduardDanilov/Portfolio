(function(){"use strict";var e={420:function(e,a,t){var n=t(751),s=t(641);const c={class:"main-content"};function r(e,a,t,n,r,o){const i=(0,s.g2)("RickAndMortyCharacters");return(0,s.uX)(),(0,s.CE)("section",c,[(0,s.bF)(i)])}const o={class:"page-wrapper"},i={class:"characters-container"};function l(e,a,t,n,c,r){const l=(0,s.g2)("CharacterFilter"),u=(0,s.g2)("SingleCharacter"),d=(0,s.g2)("PagePagination");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(l),(0,s.Lk)("div",i,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.apiData,(e=>((0,s.uX)(),(0,s.Wv)(u,{key:e.id,character:e},null,8,["character"])))),128))]),(0,s.bF)(d,{selectedPage:n.selectedPage,pagesCount:n.pagesCount,onPageChanged:n.handlePageChange},null,8,["selectedPage","pagesCount","onPageChanged"])])}var u=t(278),d=t(33);const p=e=>((0,s.Qi)("data-v-33eec8e4"),e=e(),(0,s.jt)(),e),g={class:"character-card"},h={class:"character-card__photo"},m=["src"],v={class:"character-card__text-content"},f={class:"section"},C={class:"status"},k={class:"section"},P=p((()=>(0,s.Lk)("span",{class:"text-gray"},"Last known location:",-1))),y={class:"section"},b=p((()=>(0,s.Lk)("span",{class:"text-gray"},"First seen in:",-1)));function A(e,a,t,n,c,r){return(0,s.uX)(),(0,s.CE)("div",g,[(0,s.Lk)("div",h,[(0,s.Lk)("img",{src:t.character.image,alt:"image"},null,8,m)]),(0,s.Lk)("div",v,[(0,s.Lk)("div",f,[(0,s.Lk)("h3",null,(0,d.v_)(t.character.name),1),(0,s.Lk)("span",C,[(0,s.Lk)("span",{class:(0,d.C4)(n.statusClass)},null,2),(0,s.eW)(" "+(0,d.v_)(t.character.status)+" - "+(0,d.v_)(t.character.species),1)])]),(0,s.Lk)("div",k,[P,(0,s.Lk)("p",null,(0,d.v_)(t.character.location.name),1)]),(0,s.Lk)("div",y,[b,(0,s.Lk)("p",null,(0,d.v_)(t.character.episodeName),1)])])])}var _={name:"SingleCharacter",props:{character:{type:Object,required:!0}},setup(e){const a=(0,s.EW)((()=>"Alive"===e.character.status?"status__icon status-alive":"Dead"===e.character.status?"status__icon status-dead":"status__icon status-unknown"));return{statusClass:a}}},L=t(262);const w=(0,L.A)(_,[["render",A],["__scopeId","data-v-33eec8e4"]]);var D=w;const E=e=>((0,s.Qi)("data-v-887e89d4"),e=e(),(0,s.jt)(),e),F={class:"filter-box"},O=E((()=>(0,s.Lk)("label",{for:"name",class:"label"},"Введите имя:",-1))),j=E((()=>(0,s.Lk)("label",{for:"status",class:"label"},"Выберите статус:",-1))),S=E((()=>(0,s.Lk)("option",{value:""},null,-1))),x=E((()=>(0,s.Lk)("option",{value:"alive"},"Alive",-1))),N=E((()=>(0,s.Lk)("option",{value:"dead"},"Dead",-1))),T=E((()=>(0,s.Lk)("option",{value:"unknown"},"Unknown",-1))),X=[S,x,N,T];function M(e,a,t,c,r,o){return(0,s.uX)(),(0,s.CE)("div",F,[O,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>c.localCharacterName=e),type:"text",name:"characterName",id:"name"},null,512),[[n.Jo,c.localCharacterName,void 0,{trim:!0}]]),j,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>c.localCharacterStatus=e),id:"status"},X,512),[[n.u1,c.localCharacterStatus]]),(0,s.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>c.applyFilters&&c.applyFilters(...e))},"Применить")])}var R=t(953),W={name:"CharacterFilter",setup(){const e=(0,u.Pj)(),a=(0,R.KR)(""),t=(0,R.KR)(""),n=()=>{let n="https://rickandmortyapi.com/api/character/";a.value&&(n+=`?name=${a.value}`),t.value&&(n+=`${n.includes("?")?"&":"?"}status=${t.value}`),e.commit("setQueryToApi",n),e.dispatch("fetchFilteredApiData")};return{localCharacterName:a,localCharacterStatus:t,applyFilters:n}}};const $=(0,L.A)(W,[["render",M],["__scopeId","data-v-887e89d4"]]);var I=$;const q={class:"pagination"},K=["disabled"],Q=["onClick"],U=["disabled"];function V(e,a,t,n,c,r){return(0,s.uX)(),(0,s.CE)("div",q,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>n.changePage(t.selectedPage-1)),disabled:t.selectedPage<=1},"Previous",8,K),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.getPageRange,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,onClick:a=>n.changePage(e),class:(0,d.C4)({active:e===t.selectedPage})},(0,d.v_)(e),11,Q)))),128)),(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>n.changePage(t.selectedPage+1)),disabled:t.selectedPage>=t.pagesCount},"Next",8,U)])}var J={name:"PagePagination",props:{selectedPage:Number,pagesCount:Number},setup(e,{emit:a}){const t=e=>{a("page-changed",e)},n=(0,s.EW)((()=>{const a=Math.max(e.selectedPage-5,1),t=Math.min(e.pagesCount,e.selectedPage+5);return Array.from({length:t-a+1},((e,t)=>a+t))}));return{changePage:t,getPageRange:n}}};const z=(0,L.A)(J,[["render",V]]);var B=z,G={name:"RickAndMortyCharacters",components:{SingleCharacter:D,CharacterFilter:I,PagePagination:B},setup(){const e=(0,u.Pj)(),a=(0,s.EW)((()=>e.state.charactersApiData)),t=(0,s.EW)((()=>e.state.selectedPage)),n=(0,s.EW)((()=>e.state.pagesCount)),c=a=>{e.commit("setSelectedPage",a),e.dispatch("fetchApiData")};return{apiData:a,selectedPage:t,pagesCount:n,handlePageChange:c}}};const H=(0,L.A)(G,[["render",l],["__scopeId","data-v-1ee05cef"]]);var Y=H,Z={name:"App",components:{RickAndMortyCharacters:Y},methods:{},created(){this.$store.dispatch("fetchApiData")}};const ee=(0,L.A)(Z,[["render",r]]);var ae=ee,te=t(250),ne=(0,u.y$)({state:{selectedPage:1,pagesCount:0,charactersApiData:[],queryToApi:"https://rickandmortyapi.com/api/character/"},mutations:{setApiData(e,a){e.charactersApiData=a},setPagesCount(e,a){e.pagesCount=a},setSelectedPage(e,a){e.selectedPage=a},setQueryToApi(e,a){e.queryToApi=a}},actions:{async fetchApiData({commit:e}){const a=await te.A.get(`https://rickandmortyapi.com/api/character/?page=${this.state.selectedPage}`),t=a.data.results.map((async e=>{const{id:a,name:t,status:n,species:s,episode:c,location:r,image:o}=e,i=await te.A.get(c[0]),l=i.data,u=l.name;return{id:a,name:t,status:n,species:s,location:r,image:o,episodeName:u}})),n=await Promise.all(t);e("setPagesCount",a.data.info.pages),e("setApiData",n)},async fetchFilteredApiData({commit:e}){try{const a=await te.A.get(this.state.queryToApi);if(a.data.results){const t=a.data.results.map((async e=>{const{id:a,name:t,status:n,species:s,episode:c,location:r,image:o}=e,i=await te.A.get(c[0]),l=i.data,u=l.name;return{id:a,name:t,status:n,species:s,location:r,image:o,episodeName:u}})),n=await Promise.all(t);e("setPagesCount",a.data.info.pages),e("setApiData",n)}}catch(a){console.log(a.code,"(Неверно заданы параметры фильтра)"),console.log(a.message)}}},modules:{}});(0,n.Ef)(ae).use(ne).mount("#app")}},a={};function t(n){var s=a[n];if(void 0!==s)return s.exports;var c=a[n]={exports:{}};return e[n](c,c.exports,t),c.exports}t.m=e,function(){var e=[];t.O=function(a,n,s,c){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],c=e[u][2];for(var o=!0,i=0;i<n.length;i++)(!1&c||r>=c)&&Object.keys(t.O).every((function(e){return t.O[e](n[i])}))?n.splice(i--,1):(o=!1,c<r&&(r=c));if(o){e.splice(u--,1);var l=s();void 0!==l&&(a=l)}}return a}c=c||0;for(var u=e.length;u>0&&e[u-1][2]>c;u--)e[u]=e[u-1];e[u]=[n,s,c]}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var s,c,r=n[0],o=n[1],i=n[2],l=0;if(r.some((function(a){return 0!==e[a]}))){for(s in o)t.o(o,s)&&(t.m[s]=o[s]);if(i)var u=i(t)}for(a&&a(n);l<r.length;l++)c=r[l],t.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return t.O(u)},n=self["webpackChunkrick_and_morti"]=self["webpackChunkrick_and_morti"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(420)}));n=t.O(n)})();
//# sourceMappingURL=app.78a3cfa6.js.map